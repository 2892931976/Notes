# Fix ImageMagick Vulnerability

#### How do I know if my site is vulnerable
* run `php -m | grep imagick` to check if imagick php extension is installed.

#### How to Fix
* Modify `wp-includes/media.php`(line 2898):

        // Change the priority of 2 filters
        // Comment this line
        //$implementations = apply_filters( 'wp_image_editors', array( 'WP_Image_Editor_Imagick', 'WP_Image_Editor_GD' ) );

        // Set new priority
        $implementations = apply_filters( 'wp_image_editors', array( 'WP_Image_Editor_GD', 'WP_Image_Editor_Imagick' ) );

#### References
* [ImageMagick Vulnerability Information](https://make.wordpress.org/core/2016/05/06/imagemagick-vulnerability-information/)
* [解决WordPress程序WP_Image_Editor_Imagick漏洞方法](http://www.itbulu.com/wp-imagick.html)
* [wordpress WPImageEditorImagick 指令注入漏洞](https://bbs.aliyun.com/read/281075.html)
